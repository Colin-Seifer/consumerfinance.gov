{% extends 'content-base.html' %}
{% from 'organisms/expandable.html' import expandable with context %}

{% block title -%}
    Survey Results | Consumer Financial Protection Bureau
{%- endblock %}

{% block css -%}
    {{ super() }}

    <link rel="stylesheet" href="{{ static('apps/teachers-digital-platform/css/main.css') }}">
{%- endblock css %}

{% block pre_content scoped -%}
{%- endblock %}

{% block body_content scoped %}
    <div class="content_wrapper tdp-survey-results">
        {% set overall = content.find_overall_progress(score) %}
        {% set bbs = content.building_blocks() %}

        <article aria-hidden="true" style="display:none" class="m-card initials-display">
            <h2 class="m-card_heading">
                <span>Survey completed by <span class="initials-value"></span></span>
            </h2>
        </article>

        <p class="label">Your money journey results</p>
        <p class="h1">Congratulations, {{ overall.heading_html|safe }}</p>
        <p class="h3"> {{ overall.msg_html|safe }}</p>

        <div class="results-road results-road--overall position-{{ overall.position_idx }}">
            <div class="results-road__starting-out">
                <label>Starting Out</label>
                <div class="results-road__box">
                </div>
            </div>
            <div class="results-road__on-the-road">
                <label>On the Road</label>
                <div class="results-road__box">
                </div>
            </div>
            <div class="results-road__well-on-your-way">
                <label>Well on Your Way</label>
                <div class="results-road__box">
                </div>
            </div>
        </div>

        {# modal content #}
        {% include './modals/share-url.html' %}
        {% include './modals/print.html' %}
        <div class="block">
            <h2>Exploring your results</h2>
            <p>Your overall result is based...</p>
        </div>

        <div class="o-expandable-group">
            {% set bb = 0 %}
            {% set progress = content.find_bb_progress(bb, subtotals[bb]) %}
            <div class="o-expandable o-expandable__padded">
                <button class="o-expandable_header o-expandable_target"
                        title="Expand content">
                    <h3 class="h4 o-expandable_header-left o-expandable_label">
                        <img src="{{ static('apps/teachers-digital-platform/img/planning.svg') }}" alt="planning icon"> {{ bbs[bb].title }}
                    </h3>
                    <span class="o-expandable_header-right o-expandable_link">
                <span class="o-expandable_cue o-expandable_cue-open">
                    <span class="u-visually-hidden-on-mobile">Show</span>
                    {% include 'icons/plus-round.svg' %}
                </span>
                <span class="o-expandable_cue o-expandable_cue-close">
                    <span class="u-visually-hidden-on-mobile">Hide</span>
                    {% include 'icons/minus-round.svg' %}
                </span>
            </span>
                </button>
                <div class="o-expandable_content {{ '' if is_student else 'o-expandable_content__onload-open' }}">

                    <div class="results-road results-road--planning position-{{ overall.position_idx }}">
                        <div class="results-road__starting-out">
                            <label>Starting Out</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                        <div class="results-road__on-the-road">
                            <label>On the Road</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                        <div class="results-road__well-on-your-way">
                            <label>Well on Your Way</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                    </div>
                    <p>{{ progress.msg_html|safe }} Extra content...</p>
                    <p>[LISTS]</p>
                </div>
            </div>
            {% set bb = 1 %}
            {% set progress = content.find_bb_progress(bb, subtotals[bb]) %}
            <div class="o-expandable o-expandable__padded">
                <button class="o-expandable_header o-expandable_target"
                        title="Expand content">
                    <h3 class="h4 o-expandable_header-left o-expandable_label">
                        <img src="{{ static('apps/teachers-digital-platform/img/habits.svg') }}" alt="habits icon"> {{ bbs[bb].title }}
                    </h3>
                    <span class="o-expandable_header-right o-expandable_link">
                <span class="o-expandable_cue o-expandable_cue-open">
                    <span class="u-visually-hidden-on-mobile">Show</span>
                    {% include 'icons/plus-round.svg' %}
                </span>
                <span class="o-expandable_cue o-expandable_cue-close">
                    <span class="u-visually-hidden-on-mobile">Hide</span>
                    {% include 'icons/minus-round.svg' %}
                </span>
            </span>
                </button>
                <div class="o-expandable_content {{ '' if is_student else 'o-expandable_content__onload-open' }}">
                    <div class="results-road results-road--habits position-{{ overall.position_idx }}">
                        <div class="results-road__starting-out">
                            <label>Starting Out</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                        <div class="results-road__on-the-road">
                            <label>On the Road</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                        <div class="results-road__well-on-your-way">
                            <label>Well on Your Way</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                    </div>
                    <p>{{ progress.msg_html|safe }} Extra content...</p>
                    <p>[LISTS]</p>
                </div>
            </div>
            {% set bb = 2 %}
            {% set progress = content.find_bb_progress(bb, subtotals[bb]) %}
            <div class="o-expandable o-expandable__padded">
                <button class="o-expandable_header o-expandable_target"
                        title="Expand content">
                    <h3 class="h4 o-expandable_header-left o-expandable_label">
                        <img src="{{ static('apps/teachers-digital-platform/img/knowledge.svg') }}" alt="knowledge icon"> {{ bbs[bb].title }}
                    </h3>
                    <span class="o-expandable_header-right o-expandable_link">
                <span class="o-expandable_cue o-expandable_cue-open">
                    <span class="u-visually-hidden-on-mobile">Show</span>
                    {% include 'icons/plus-round.svg' %}
                </span>
                <span class="o-expandable_cue o-expandable_cue-close">
                    <span class="u-visually-hidden-on-mobile">Hide</span>
                    {% include 'icons/minus-round.svg' %}
                </span>
            </span>
                </button>
                <div class="o-expandable_content {{ '' if is_student else 'o-expandable_content__onload-open' }}">
                    <div class="results-road results-road--knowledge position-{{ overall.position_idx }}">
                        <div class="results-road__starting-out">
                            <label>Starting Out</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                        <div class="results-road__on-the-road">
                            <label>On the Road</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                        <div class="results-road__well-on-your-way">
                            <label>Well on Your Way</label>
                            <div class="results-road__box">
                            </div>
                        </div>
                    </div>
                    <p>{{ progress.msg_html|safe }} Extra content...</p>
                    <p>[LISTS]</p>
                </div>
            </div>
        </div>
        <div class="block">
            <h2>What does it all mean?</h2>
            <p>Keep in mind that...</p>
            <h4>Want to learn more? Check out these tools:</h4>
            <p>Remember, come back...</p>
            <div class="o-well">
                <ul>
                    <li>[LIST]</li>
                </ul>
            </div>
        </div>

        <p>
            {% if is_student %}
            <button type="button" class="a-btn" data-open-modal="modal-share-url">
                Share results
            </button>
            <button type="button" class="a-btn" data-open-modal="modal-print">
                Print results
            </button>
            {% else %}
            <button type="button" class="a-btn" onclick="window.print()">
                Print results
            </button>
            {% endif %}
        </p>

        {% if is_student %}
        <div class="block">
        <p>
                <a class="results-start-over a-btn a-btn__link a-btn__warning" href="../">
                    Reset survey and start over
                </a>
            </p>
            </div>
        {% endif %}
    </div>
{% endblock body_content %}

{% block javascript %}
    {{ super() }}

    {# Conditional comment used to block IE8 and under from receiving JS #}
    <!--[if gt IE 8]><!-->
        <script src="{{ static('apps/teachers-digital-platform/js/index.js') }}"></script>
    <!--<![endif]-->
{% endblock javascript %}
