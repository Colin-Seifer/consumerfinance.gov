{% extends 'content-base.html' %}
{% from 'organisms/expandable.html' import expandable with context %}

{% block title -%}
    Survey Results | Consumer Financial Protection Bureau
{%- endblock %}

{% block css -%}
    {{ super() }}

    <link rel="stylesheet" href="{{ static('apps/teachers-digital-platform/css/main.css') }}">
{%- endblock css %}

{% block pre_content scoped -%}
{%- endblock %}

{% block body_content scoped %}
    <div class="content_wrapper tdp-survey-results">
        {% set overall = content.find_overall_progress(score) %}
        {% set bbs = content.building_blocks() %}

        <article aria-hidden="true" style="display:none" class="m-card initials-display">
            <h2 class="m-card_heading">
                <span>Survey completed by <span class="initials-value"></span></span>
            </h2>
        </article>

        <h1>Your money journey results</h1>
        <h2>Congratulations, {{ overall.heading_html|safe }}</h2>
        <p>{{ overall.msg_html|safe }}</p>

        <p>[CAR in position {{ overall.position_idx }}]</p>

        <p>[SHARES]</p>
        <p>
        {% if is_student %}
            <button type="button" class="a-btn" data-open-modal="modal-share-url">
                Share results
            </button>
            <button type="button" class="a-btn" data-open-modal="modal-print">
                Print results
            </button>
        {% else %}
            <button type="button" class="a-btn" onclick="window.print()">
                Print results
            </button>
        {% endif %}
        </p>

        {# modal content #}
        {% include './modals/share-url.html' %}
        {% include './modals/print.html' %}

        <h2>Exploring your results</h2>
        <p>Your overall result is based...</p>

        <div class="o-expandable-group">
            {% set bb = 0 %}
            {% set progress = content.find_bb_progress(bb, subtotals[bb]) %}
            <div class="o-expandable o-expandable__padded">
                <button class="o-expandable_header o-expandable_target"
                        title="Expand content">
                    <h3 class="h4 o-expandable_header-left o-expandable_label">
                        [ICON] {{ bbs[bb].title }}
                    </h3>
                    <span class="o-expandable_header-right o-expandable_link">
                <span class="o-expandable_cue o-expandable_cue-open">
                    <span class="u-visually-hidden-on-mobile">Show</span>
                    {% include 'icons/plus-round.svg' %}
                </span>
                <span class="o-expandable_cue o-expandable_cue-close">
                    <span class="u-visually-hidden-on-mobile">Hide</span>
                    {% include 'icons/minus-round.svg' %}
                </span>
            </span>
                </button>
                <div class="o-expandable_content {{ '' if is_student else 'o-expandable_content__onload-open' }}">
                    <p>[CAR in position {{ progress.position_idx }}]</p>
                    <p>{{ progress.msg_html|safe }} Extra content...</p>
                    <p>[LISTS]</p>
                </div>
            </div>
            {% set bb = 1 %}
            {% set progress = content.find_bb_progress(bb, subtotals[bb]) %}
            <div class="o-expandable o-expandable__padded">
                <button class="o-expandable_header o-expandable_target"
                        title="Expand content">
                    <h3 class="h4 o-expandable_header-left o-expandable_label">
                        [ICON] {{ bbs[bb].title }}
                    </h3>
                    <span class="o-expandable_header-right o-expandable_link">
                <span class="o-expandable_cue o-expandable_cue-open">
                    <span class="u-visually-hidden-on-mobile">Show</span>
                    {% include 'icons/plus-round.svg' %}
                </span>
                <span class="o-expandable_cue o-expandable_cue-close">
                    <span class="u-visually-hidden-on-mobile">Hide</span>
                    {% include 'icons/minus-round.svg' %}
                </span>
            </span>
                </button>
                <div class="o-expandable_content {{ '' if is_student else 'o-expandable_content__onload-open' }}">
                    <p>[CAR in position {{ progress.position_idx }}]</p>
                    <p>{{ progress.msg_html|safe }} Extra content...</p>
                    <p>[LISTS]</p>
                </div>
            </div>
            {% set bb = 2 %}
            {% set progress = content.find_bb_progress(bb, subtotals[bb]) %}
            <div class="o-expandable o-expandable__padded">
                <button class="o-expandable_header o-expandable_target"
                        title="Expand content">
                    <h3 class="h4 o-expandable_header-left o-expandable_label">
                        [ICON] {{ bbs[bb].title }}
                    </h3>
                    <span class="o-expandable_header-right o-expandable_link">
                <span class="o-expandable_cue o-expandable_cue-open">
                    <span class="u-visually-hidden-on-mobile">Show</span>
                    {% include 'icons/plus-round.svg' %}
                </span>
                <span class="o-expandable_cue o-expandable_cue-close">
                    <span class="u-visually-hidden-on-mobile">Hide</span>
                    {% include 'icons/minus-round.svg' %}
                </span>
            </span>
                </button>
                <div class="o-expandable_content {{ '' if is_student else 'o-expandable_content__onload-open' }}">
                    <p>[CAR in position {{ progress.position_idx }}]</p>
                    <p>{{ progress.msg_html|safe }} Extra content...</p>
                    <p>[LISTS]</p>
                </div>
            </div>
        </div>

        <h2>What does it all mean?</h2>
        <p>Keep in mind that...</p>
        <h4>Want to learn more? Check out these tools:</h4>
        <p>Remember, come back...</p>
        <ul>
            <li>[LIST]</li>
        </ul>

        {% if is_student %}
            <p>
                <a class="results-start-over a-btn a-btn__link a-btn__warning" href="../">
                    Reset survey and start over
                </a>
            </p>
        {% endif %}
    </div>
{% endblock body_content %}

{% block javascript %}
    {{ super() }}

    {# Conditional comment used to block IE8 and under from receiving JS #}
    <!--[if gt IE 8]><!-->
        <script src="{{ static('apps/teachers-digital-platform/js/index.js') }}"></script>
    <!--<![endif]-->
{% endblock javascript %}
