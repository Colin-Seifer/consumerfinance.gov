{% extends 'content-base.html' %}
{% from 'organisms/expandable.html' import expandable with context %}

{% block head %}
{{ wizard.form.media }}
{% endblock %}

{% block title -%}
    Survey: {{ survey.meta.name }} | Consumer Financial Protection Bureau
{%- endblock %}

{% block css -%}
    {{ super() }}

    <link rel="stylesheet" href="{{ static('apps/teachers-digital-platform/css/main.css') }}">
{%- endblock css %}

{% block pre_content scoped -%}
{%- endblock %}

{% block body_content scoped %}
    <div class="content_wrapper tdp-survey-page"
         data-page-idx="{{ page_idx|tojson|forceescape }}"
         data-questions-by-page="{{ questions_by_page|tojson|forceescape }}">
        {# <h1>Survey Page {{ wizard.steps.step1 }}</h1> #}
        <form action="" method="post"> 
            
            {{ csrf_input }}
        
            {{ wizard.management_form }}
            {% if wizard.form.forms %}
            
                {{ wizard.form.management_form }}
                {% for form in wizard.form.forms %}
                    {{ form.as_p() }}
                {% endfor %}
            {% else %}
                {{ wizard.form.as_p() }}
            {% endif %}

            <p>
            {% if wizard.steps.prev %}
                <a class="a-btn" href="../{{ wizard.steps.prev }}/">
                    {% include 'icons/left.svg' %} |
                    <span class="a-link_text">Previous</span>
                </a>
            {% endif %}
            {% if wizard.steps.next %}
                <button class="a-btn" type="submit">
                    Continue | {% include 'icons/right.svg' %}
                </button>
            {% else %}
                <button class="a-btn" type="submit">
                    Get My Results | {% include 'icons/right.svg' %}
                </button>
            {% endif %}
                {# TODO wire this up #}
                <a href="#">Reset survey and start over</a>
            </p>
        </form>

        {# wizard.steps.all is a list of 'p1', 'p2', ... #}
    </div>
{% endblock body_content %}

{% block javascript %}
    {{ super() }}

    {# Conditional comment used to block IE8 and under from receiving JS #}
    <!--[if gt IE 8]><!-->
        <script src="{{ static('apps/teachers-digital-platform/js/index.js') }}"></script>
    <!--<![endif]-->
{% endblock javascript %}
