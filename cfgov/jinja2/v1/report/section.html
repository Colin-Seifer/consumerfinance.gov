{% set is_report = True %}
{% extends 'layout-side-nav.html' %}

{% import 'form_block.html' as form_block with context %}
{% import 'atoms/pdf-download.html' as pdf_download with context %}
{% import 'templates/render_block.html' as render_block with context %}
{% import 'templates/streamfield-sidefoot.html' as streamfield_sidefoot with context %}

{% block content_main_modifiers -%}
    {{ super() }} content__flush-bottom
{%- endblock %}

{% block content_main %}
    <div class="block block__flush-top">
      <h1>{{ page.header }}</h1>
      {{ render_rich_html(page.subheader) }}
      {{ pdf_download.render({'pdf_url': page.pdf_location }) }}
    </div>

    {% for section in page.report_sections.all().order_by('pk') -%}
      <h3 class="report-header"><a style="color:black;" id="{{section.html_id}}" href="#{{section.html_id}}">{{section.header}}</a></h3>
      {{ render_rich_html(section.body) }}
      {% for subsection in section.report_subsections.all().order_by('pk') -%}
        <h4 class="report-header"><a style="color:black;" id="{{subsection.html_id}}" href="#{{subsection.html_id}}">{{subsection.header}}</a></h3>
        {{ render_rich_html(subsection.body) }}
      {%- endfor %}
    {%- endfor %}
    
    <div class="block block__flush-top">
      {{ render_rich_html(page.footnotes) }}
    </div>

    {% if page.sidefoot %}
        <aside class="o-prefooter">
            {{ streamfield_sidefoot.render(page.sidefoot, half_width=true) }}
        </aside>
    {% endif %}

{% endblock %}
